<!DOCTYPE html>
<html lang="en" dir="ltr" style="overflow-y:hidden">
<head>
	<meta charset="utf-8">
	<title>ItemSzop</title>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
	<script src="https://unpkg.com/vue-router@3.5.3/dist/vue-router.js"></script>
	<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css"/>
</head>
<body>
	<script type="text/html" id="_sklep">
		<h1>Sklep</h1>
	</script>
	<script type="text/html" id="_regulamin">
		<h1>Regulamin</h1>
	</script>
	<script type="text/html" id="_voucher">
		<h1>Voucher</h1>
	</script>
	<div class="container" id="app">
		<h1 class="title mt-5 mb-2">ItemSzop</h1>
		<nav class="navbar" role="navigation" aria-label="main navigation">
			<div class="navbar-brand">
				<a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
				</a>
			</div>

			<div id="navbarBasicExample" class="navbar-menu">
				<div class="navbar-start">
					<router-link to="/" class="navbar-item">
						Sklep
					</router-link>
					<router-link to="/regulamin" class="navbar-item">
						Regulamin
					</router-link>
					<router-link to="/voucher" class="navbar-item">
						Zrealizuj voucher
					</router-link>
				</div>
			</div>
		</nav>
		<div class="columns mt-1">
			<div class="column is-two-thirds">
				<div class="card">
					<header class="card-header">
						<nav class="breadcrumb p-3" aria-label="breadcrumbs">
							<ul>
								<li v-for="(breadcrumb, idx) in breadcrumbList" :key="idx" @click="routeTo(idx)" :class="{'linked': !!breadcrumb.link}">
									<a>{{ breadcrumb.name }}</a>
								</li>
							</ul>
						</nav>
					</header>
					<div class="card-content">
						<div class="content">
							<router-view></router-view>
						</div>
					</div>
				</div>
			</div>
			<div class="column">
				<div class="card">
					<header class="card-header">
						<p class="card-header-title">
							Utrzymanie serwera
						</p>
					</header>
					<div class="card-content">
						<div class="content">
							<progress class="progress" value="15" max="100">15%</progress>
						</div>
					</div>
				</div>
				<div class="card mt-4">
					<header class="card-header">
						<p class="card-header-title">
							Ostatnie zakupy
						</p>
					</header>
					<div class="card-content">
						<div class="content">

						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<script>
	const voucher = { template: '#_voucher' }
	const regulamin = { template: '#_regulamin' }
	const sklep = { template: '#_sklep' }
	const router = new VueRouter({
		routes: [
			{
				path: '/voucher',
				component: voucher,
				meta: {
					breadcrumb:[
						{
							name:'Sklep',
							link:'/'
						},
						{
							name:'Zrealizuj voucher'
						}
					]
				}
			},
			{
				path: '/regulamin',
				component: regulamin,
				meta: {
					breadcrumb:[
						{
							name:'Sklep',
							link:'/'
						},
						{
							name:'Regulamin'
						}
					]
				}
			},
			{
				path: '/',
				component: sklep,
				meta: {
					breadcrumb:[
						{
							name:'Sklep',
							link:'/'
						},
						{
							name:'Serwery'
						}
					]
				}
			}
		]
	})
	const app = new Vue({
		router,
		data () {
			return {
				breadcrumbList: []
			}
		},
		mounted: function() { this.updateList() },
		watch: {'$route': function(){ this.updateList() } },
		methods: {
			routeTo (pRouteTo) {
				if (this.breadcrumbList[pRouteTo].link) this.$router.push(this.breadcrumbList[pRouteTo].link)
			},
			updateList(){
				this.breadcrumbList=this.$route.meta.breadcrumb
			}
		}
	}).$mount('#app')
</script>
</body>
</html>
